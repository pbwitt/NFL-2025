<!doctype html>
<html>
<head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>NFL-2025 — Player Props (Week 1)</title>
<style>
:root { --bg:#0b0b10; --card:#14141c; --muted:#9aa0a6; --text:#e8eaed; --border:#23232e }
*{box-sizing:border-box} body{margin:0;padding:24px;background:var(--bg);color:var(--text);
font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial}
h1{margin:0 0 8px;font-size:22px;font-weight:700;letter-spacing:.2px}
.small{color:var(--muted);font-size:12px;margin-bottom:16px}
.card{background:linear-gradient(180deg,rgba(255,255,255,.03),rgba(255,255,255,0));
border:1px solid var(--border);border-radius:16px;padding:16px;margin-bottom:16px;
box-shadow:0 0 0 1px rgba(255,255,255,.02),0 12px 40px rgba(0,0,0,.35)}
.controls{display:grid;grid-template-columns:repeat(5,minmax(0,1fr));gap:10px}
select,input{background:var(--card);color:var(--text);border:1px solid var(--border);
border-radius:10px;padding:10px 12px;outline:none}
.select:focus,input:focus{border-color:#6ee7ff;box-shadow:0 0 0 3px rgba(110,231,255,.15)}
.badge{display:inline-block;padding:4px 8px;border-radius:999px;font-size:12px;color:#111;background:#6ee7ff}
.table-wrap{overflow:auto;border:1px solid var(--border);border-radius:14px}
table{border-collapse:collapse;width:100%;min-width:1000px}
th,td{padding:10px 12px;border-bottom:1px solid var(--border)}
th{text-align:left;position:sticky;top:0;background:var(--card);z-index:1;font-size:12px;color:var(--muted);letter-spacing:.2px}
td.num{text-align:right;font-variant-numeric:tabular-nums}
tr:hover td{background:rgba(255,255,255,.02)}
footer{color:var(--muted);font-size:12px;margin-top:16px}
a.button{display:inline-block;margin:8px 0;padding:8px 14px;border-radius:10px;text-decoration:none;font-weight:600;color:#111;background:#a78bfa;border:1px solid var(--border)}
a.button:hover{background:#6ee7ff}
.linklike{color:#a78bfa;text-decoration:none;border-bottom:1px dotted #a78bfa}
</style>
</head>
<body>

  <div class="card">
    <h1>NFL-2025 — Player Props (Week 1)</h1>
    <div class="small">Select <span class="badge">Bet</span> → Game → Player. Optional: Book & search. Sorted by Edge (bps). Line = sportsbook threshold.</div>
    <p><a href="../" class="button">⬅ Back to Home</a> · <a class="linklike" href="./consensus.html">Consensus</a></p>

    <div class="controls">
      <select id="market"><option value="">Bet (market)</option></select>
      <select id="game"><option value="">Game</option></select>
      <select id="player"><option value="">Player</option></select>
      <select id="book"><option value="">Book</option></select>
      <input id="q" type="search" placeholder="Search player / team / book…" />
    </div>

    <div class="small" style="margin-top:10px;">
      <span id="count"></span> · Tip: “No Scorer” is hidden.
      <span style="float:right;"><a class="linklike" href="../">Back to site root</a></span>
    </div>
  </div>

  <div class="card table-wrap">
    <table id="tbl">
      <thead>
        <tr>
          <th>Game</th><th>Player</th><th>Book</th><th>Bet</th>
          <th class="num">Line</th>
          <th class="num">Mkt Odds</th><th class="num">Fair</th>
          <th class="num">Mkt %</th><th class="num">Model %</th>
          <th class="num">Edge (bps)</th><th>Kick (ET)</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>

  <footer>Generated locally. Dark theme, zero dependencies.</footer>

<script>
const DATA = [];

function uniq(arr){ return [...new Set(arr.filter(Boolean))].sort((a,b)=>a.localeCompare(b)); }

const state = { market:"", game:"", player:"", book:"", q:"" };
const selMarket = document.getElementById("market");
const selGame   = document.getElementById("game");
const selPlayer = document.getElementById("player");
const selBook   = document.getElementById("book");
const inputQ    = document.getElementById("q");
const tbody     = document.querySelector("#tbl tbody");
const countEl   = document.getElementById("count");

function hydrateSelectors(){
  uniq(DATA.map(r=>r.market_std)).forEach(v=>{ const o=document.createElement("option"); o.value=v; o.textContent=v; selMarket.appendChild(o); });
  uniq(DATA.map(r=>r.bookmaker)).forEach(v=>{ const o=document.createElement("option"); o.value=v; o.textContent=v; selBook.appendChild(o); });
  rebuildDependentSelectors();
}
function rebuildDependentSelectors(){
  const base = DATA.filter(r => (!state.market || r.market_std===state.market) &&
                                (!state.book   || r.bookmaker===state.book));
  const games = uniq(base.map(r=>r.game));
  selGame.innerHTML = '<option value="">Game</option>' + games.map(g=>`<option value="${g}">${g}</option>`).join("");
  if (games.includes(state.game)) selGame.value = state.game; else state.game = "";

  const base2 = base.filter(r => (!state.game || r.game===state.game));
  const players = uniq(base2.map(r=>r.player));
  selPlayer.innerHTML = '<option value="">Player</option>' + players.map(p=>`<option value="${p}">${p}</option>`).join("");
  if (players.includes(state.player)) selPlayer.value = state.player; else state.player = "";
}

function render(){
  const q = state.q.trim().toLowerCase();
  const rows = DATA.filter(r =>
    (!state.market || r.market_std===state.market) &&
    (!state.game   || r.game===state.game) &&
    (!state.player || r.player===state.player) &&
    (!state.book   || r.bookmaker===state.book) &&
    (!q || (r.player+" "+r.bookmaker+" "+r.game).toLowerCase().includes(q))
  ).sort((a,b)=> (b.edge_bps ?? -1) - (a.edge_bps ?? -1));

  countEl.textContent = rows.length + " rows";

  tbody.innerHTML = rows.map(r => `
    <tr>
      <td>${r.game||""}</td>
      <td>${r.player||""}</td>
      <td>${r.bookmaker||""}</td>
      <td>${r.market_std||""}</td>
      <td class="num">${r.line_disp ?? ""}</td>
      <td class="num">${r.mkt_odds ?? ""}</td>
      <td class="num">${r.fair_odds ?? ""}</td>
      <td class="num">${r.mkt_pct ?? ""}</td>
      <td class="num">${r.model_pct ?? ""}</td>
      <td class="num" style="color:${
        (r.edge_bps==null) ? "#9aa0a6" : (r.edge_bps>0 ? "#4ade80" : "#f87171")
      }">${r.edge_bps ?? ""}</td>
      <td>${r.kick_et||""}</td>
    </tr>
  `).join("");
}

selMarket.addEventListener("change", e=>{ state.market=e.target.value; rebuildDependentSelectors(); render(); });
selGame  .addEventListener("change", e=>{ state.game  =e.target.value; rebuildDependentSelectors(); render(); });
selPlayer.addEventListener("change", e=>{ state.player=e.target.value; render(); });
selBook  .addEventListener("change", e=>{ state.book  =e.target.value; rebuildDependentSelectors(); render(); });
inputQ   .addEventListener("input",  e=>{ state.q     =e.target.value; render(); });

hydrateSelectors(); render();
</script>
</body></html>
